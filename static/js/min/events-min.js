var $j=jQuery.noConflict(),bacPos=0,projects,initialPosProjects,sidebar,heightLi,headerHeight,projectsHeight,fixedLinks,projectsSidebarHeight,nbLiVisible,roundProjectsSidebarHeight,actualTop,newTop;$j.fn.exists=function(){return 0!==this.length},$j(function(){function e(){$j(".bloc-inside-radio",$j(".has-content-hide:checked").parent()).css("display","inline-block"),$j(".hide-when-content",$j(".has-content-hide:checked").parent()).css("display","none"),$j(".bloc-inside-radio",$j(".has-content-hide:not(:checked)").parent()).css("display","none"),$j(".hide-when-content",$j(".has-content-hide:not(:checked)").parent()).css("display","inline-block"),$j('.erp-form input[type="radio"]').click(function(){t()})}function t(){$j(".bloc-inside-radio",$j(".has-content-hide:checked").parent()).css("display","inline-block"),$j(".hide-when-content",$j(".has-content-hide:checked").parent()).css("display","none"),$j(".bloc-inside-radio",$j(".has-content-hide:not(:checked)").parent()).css("display","none"),$j(".hide-when-content",$j(".has-content-hide:not(:checked)").parent()).css("display","inline-block")}function i(){$j(".sidebar").is(":visible")?$j(".hs-inner").css("max-width",$j("#header").width()-399+"px"):$j(".hs-inner").css("max-width",$j("#header").width()+"px");var e=$j(".translate-translation"),t=e.width()-(e.find(".erase-btn").outerWidth(!0)-1+e.find(".is-status").outerWidth(!0))-50,i=t;e.find(".error-alert").length&&(i=t-100),$j(".spellchecker").css("max-width",i),$j(".btr-cell").css("max-width",t),$j.each($j(".is-search .tl-item"),function(e,i){var n=$j(i);n.find(".translate-overflow").css("max-width",t)});var n=$j(".is-search");n.css("top",-n.height()-1);var o=$j(".block-tradmore");o.css("bottom",-o.height()-2)}function n(e){actualTop=parseInt(projects.css("top"),10),newTop=e?actualTop-roundProjectsSidebarHeight:actualTop+roundProjectsSidebarHeight,projects.stop().animate({top:newTop},{queue:!1}),e&&actualTop==initialPosProjects&&$j("#prevProjects").fadeIn(),e||newTop!=initialPosProjects||$j("#prevProjects").fadeOut(),e&&newTop+projectsHeight<$j("#nextProjects").offset().top-headerHeight?$j("#nextProjects").fadeOut():$j("#nextProjects").fadeIn()}function o(){projectsSidebarHeight=sidebar.innerHeight()-initialPosProjects-fixedLinks,nbLiVisible=Math.floor(projectsSidebarHeight/heightLi),roundProjectsSidebarHeight=nbLiVisible*heightLi,projectsHeight>roundProjectsSidebarHeight+heightLi?$j("#nextProjects").fadeIn():$j("#nextProjects").fadeOut()}function a(){var e=$j("#footer"),t=$j("#header"),i=$j("#main-container").outerHeight(!0)+e.outerHeight(!0)+t.outerHeight(!0)+30,n=$j(window).height();e.hasClass("bottom")&&i>=n&&e.removeClass("bottom"),n>i&&(e.addClass("bottom"),padding_bottom=parseInt($j("#main-container").css("padding-bottom").slice(0,-2)),$j("#main-container").css("padding-bottom",padding_bottom+e.outerHeight(!0)))}var s;$j("#open-usermenu").on("click",function(){$j("body").toggleClass("usermenu-open")}),$j("#open-config").on("click",function(){$j(".config-dropdown").slideToggle("fast"),$j(this).parent(".menu-config").toggleClass("open")}),$j(document).on("click",".cat-close",function(){if(!PTL.editor.settings.review){var e=$(this).parents().find(".fix-wrapper");$(this).parent().parent().find(".spellchecker").text(""),e.find(".is-amagama").hide(),e.find(".bing-translation-result").text(""),e.find(".google-translation-result").text("")}}),$j("#open-menu").on("click",function(e){e.stopPropagation(),$j("body").toggleClass("sidebar-open").toggleClass("sidebar-disable"),setTimeout(function(){$j(window).trigger("resize")},300)}),$j("body").hasClass("rating-method")&&e(),window.tuneSizes=i,$j(window).load(function(){i(),$j("body").hasClass("sidebar-open")&&$j(".projets").length&&(projects=$j(".projets"),initialPosProjects=parseInt(projects.css("top"),10),sidebar=$j(".sidebar"),heightLi=projects.find("li").outerHeight(),headerHeight=$j("header").innerHeight(),projectsHeight=projects.innerHeight(),fixedLinks=2*heightLi+sidebar.find("li.s-menu").innerHeight(),o(),$j("#nextProjects").on("click",function(){return n(!0),!1}),$j("#prevProjects").on("click",function(){return n(!1),!1}))}),window.tunePositions=function(){var e=$j(".is-workspace");if(e.length){var t=e.position();$j(".results-popup").css({top:t.top+e.outerHeight(!1)+19})}},window.tunePositions(),$("#calendar").length&&$("#calendar").fullCalendar({header:{left:"title",right:"prev,next"},buttonIcons:!1,buttonText:{prev:"← Previous",next:"Next →"},titleFormat:"MMMM",height:700,allDaySlot:!1,columnFormat:{month:"dddd"},firstDay:1,editable:!0,events:[{title:"Project 1",start:"2015-03-05",end:"2015-03-14",backgroundColor:"#d0e7cc"},{title:"Project 2",start:"2015-03-15",end:"2015-03-21",backgroundColor:"#d7ebef"},{title:"Project 3",start:"2015-03-09",end:"2015-03-24",backgroundColor:"#FFD897"},{title:"Paiment received",start:"2015-03-09"}],dayRender:function(e,t){if(!t.hasClass("fc-past")){var i=t.parents(".fc-bg").siblings(".fc-content-skeleton").find("thead tr").find("td").eq(t.index()),n=t.hasClass("fc-sat")||t.hasClass("fc-sun")?0:8;i.append('<div class="availabilityBtn"><button>-</button><span>'+n+'h</span><button class="plus">+</button></div>')}}}),$("#calendar-erp").length&&$("#calendar-erp").fullCalendar({header:{left:"",right:"prev,next",center:"title"},buttonIcons:!1,buttonText:{prev:"← Previous",next:"Next →"},titleFormat:"MMMM",height:700,allDaySlot:!1,columnFormat:{month:"dddd"},firstDay:1,editable:!0,events:[{title:"PROJECT COBRA (PREVIEW)",start:"2015-04-08",end:"2015-04-14",backgroundColor:"#9cced8",textColor:"#ffffff"},{title:"Projet 3",start:"2015-04-09",end:"2015-04-21",backgroundColor:"#e7e7e7",textColor:"#4a4a4a"}]}),$("#calendar-erp-2").length&&$("#calendar-erp-2").fullCalendar({header:{left:"title",right:"prev,next"},buttonIcons:!1,buttonText:{prev:"← Previous",next:"Next →"},titleFormat:"MMMM['s overview]",height:700,allDaySlot:!1,columnFormat:{month:"dddd"},firstDay:1,editable:!0,events:[{title:"Projet 1",start:"2015-04-05",end:"2015-04-13",backgroundColor:"#ffd897",textColor:"#4a4a4a"},{title:"Projet 3",start:"2015-04-09",end:"2015-04-23",backgroundColor:"#d0e7cc",textColor:"#4a4a4a"},{title:"Projet 2",start:"2015-04-15",end:"2015-04-21",backgroundColor:"#d7ebef",textColor:"#4a4a4a"},{title:"Payment received",start:"2015-04-09",end:"2015-04-10",textColor:"#4a4a4a"}],dayRender:function(e,t){if(!t.hasClass("fc-past")){var i=t.parents(".fc-bg").siblings(".fc-content-skeleton").find("thead tr").find("td").eq(t.index()),n=t.hasClass("fc-sat")||t.hasClass("fc-sun")?0:8;i.append('<div class="availabilityBtn"><button>-</button><span>'+n+'h</span><button class="plus">+</button></div>')}}}),$(".popup").length&&$(".popup").magnificPopup({type:"inline",midClick:!0}),$(".popAddContact").length&&$(".popAddContact").magnificPopup({type:"inline",midClick:!0,mainClass:"popAddContact"}),$(".popConnect").length&&$(".popConnect").magnificPopup({type:"inline",midClick:!0,mainClass:"popConnect"}),$(".openingPopupLink").length&&$(".openingPopupLink").magnificPopup({type:"inline",midClick:!0,mainClass:"openingPopup"}),$(".teamingPopupLink").length&&$(".teamingPopupLink").magnificPopup({type:"inline",midClick:!0,mainClass:"teamingPopup"}),$(".translatingPopupLink").length&&$(".translatingPopupLink").magnificPopup({type:"inline",midClick:!0,mainClass:"translatingPopup"}),$(".reviewingPopupLink").length&&$(".reviewingPopupLink").magnificPopup({type:"inline",midClick:!0,mainClass:"reviewingPopup"}),$(".deliveringPopupLink").length&&$(".deliveringPopupLink").magnificPopup({type:"inline",midClick:!0,mainClass:"deliveringPopup"}),$(".paymentPopupLink").length&&$(".paymentPopupLink").magnificPopup({type:"inline",midClick:!0,mainClass:"paymentPopup"}),$(".ratingPopupLink").length&&$(".ratingPopupLink").magnificPopup({type:"inline",midClick:!0,mainClass:"ratingPopup"}),$(".pm-popup-link").length&&$(".pm-popup-link").magnificPopup({type:"inline",midClick:!0,mainClass:"pmPopup"}),$(".contactPopup-link").length&&$(".contactPopup-link").magnificPopup({type:"inline",midClick:!0,mainClass:"contactPopup"}),$(".selectClientPopup-link").length&&$(".selectClientPopup-link").magnificPopup({type:"inline",midClick:!0,mainClass:"selectClientPopup"}),$(".remindMePop-link").length&&$(".remindMePop-link").magnificPopup({type:"inline",midClick:!0,mainClass:"remindMePop"}),$(".addWorkerPopup-link").length&&$(".addWorkerPopup-link").magnificPopup({type:"inline",midClick:!0,mainClass:"addWorkerPopup",callbacks:{open:function(){var e=$(this);$("#go-back-workers").length&&$("#go-back-workers").click(function(){$(".mfp-bg").removeClass("viewWorkerPopup").addClass("addWorkerPopup")}),$(".viewWorkerPopup-link").length&&($(".viewWorkerPopup-link").click(function(){$(".mfp-bg").removeClass("addWorkerPopup").addClass("viewWorkerPopup")}),$(".viewWorkerPopup-link").magnificPopup({type:"inline",midClick:!0})),$(".warningPopup-link").length&&($(".warningPopup-link").click(function(){$(".mfp-bg").removeClass("addWorkerPopup").addClass("warningPopup")}),$(".warningPopup-link").magnificPopup({type:"inline",midClick:!0}))}}}),$(document).ready(function(){$(".switch-item").each(function(){$(this).click(function(){$(".switch-item").removeClass("active"),$(this).addClass("active")})})}),$(document).ready(function(){$("#project-progress .expand a").click(function(){$(this).hasClass("open")?$(this).css({"-webkit-transform":"rotate(0deg)","-moz-transform":"rotate(0deg)","-ms-transform":"rotate(0deg)","-o-transform":"rotate(0deg)",transform:"rotate(0deg)",zoom:1},100):$(this).css({"-webkit-transform":"rotate(90deg)","-moz-transform":"rotate(90deg)","-ms-transform":"rotate(90deg)","-o-transform":"rotate(90deg)",transform:"rotate(90deg)",zoom:1},100),$(this).toggleClass("open");var e=$(this).parents(".progress-item");return $(".progress-item-info",e).slideToggle({duration:1e3}),!1})}),window.animateLoader=function(e,t){bacPos++,t?e.css("background-position","0px "+-bacPos+"px"):e.css("background-position",bacPos+"px"),setTimeout(function(){animateLoader(e,t)},10)},window.showLoader=function(){$j("#loader").length||$j("<div>",{id:"loader"}).appendTo("body")},window.hideLoader=function(){$j("#loader").remove()},$("#smallLoader").length&&window.animateLoader($j("#smallLoader"),!0),$j("#view-read").on("click",function(){return $j(this).addClass("actif").siblings().removeClass("actif"),$j(".table-trad").addClass("reviewer"),i(),!1}),$j("#view-edit").on("click",function(){return $j(this).addClass("actif").siblings().removeClass("actif"),$j(".table-trad").removeClass("reviewer"),i(),!1}),$(document).ajaxSend(function(e,t,i){var n=["/notifications/"],o=-1!==$.inArray(i.url,n),a=i.async&&"GET"===i.type;a||o||window.showLoader()}),$(document).ajaxStop(window.hideLoader),$(document).on("submit","form",window.showLoader),$("#view-read").on("click",function(){return $(this).addClass("actif").siblings().removeClass("actif"),$(".table-trad").addClass("reviewer"),PTL.editor.settings.review=!0,PTL.editor.displayEditUnit(),i(),!1}),$("#view-edit").on("click",function(){return $(this).addClass("actif").siblings().removeClass("actif"),$(".table-trad").removeClass("reviewer"),PTL.editor.settings.review=!1,PTL.editor.displayEditUnit(),i(),!1}),$("#open-stats").on("click",function(e){var t;return e.preventDefault(),$(".table-trad").slideToggle(),$("#stats").slideToggle(),$(this).toggleClass("actif"),$("#tptranslate").toggleClass("white"),$(".mfp-wrap").toggle(),$(this).hasClass("actif")&&(t=$("#show-stats-for li.active-orderby a").data("store"),Stats.showStats(t)),!1}),$(".stats-link").on("click",function(){Stats.showStats($(this).data("store"))}),a(),$j(window).resize(function(){a(),i(),window.tunePositions(),$j("body").hasClass("sidebar-open")&&$j(".projets").length&&o()}),$(".orderby-notifs").on("click",function(){$(this).find("ul").toggleClass("open")}).find("li").on("click",function(){var e=$(this).html(),t=$(".active-orderby").html();$(".active-orderby").html(e),$(this).html(t)}),$(".sidebar-notifs").on("click",".sss-item > a",window.showLoader),$("#closeCtrlF").on("click",function(){return $(this).parent(".hs-inner").slideUp(),!1}),$("#autogrow").length&&$("#autogrow").autoGrowTextArea(),$j("#closeCtrlF").on("click",function(){return console.log("yolo"),$j(this).parent(".hs-inner").slideUp(),!1}),$j(".sidebar.is-submenu").find(".s-item").on("click",function(){return $j(this).toggleClass("is-open").parent().siblings().find(".s-item").removeClass("is-open"),!1}),$j(".table-trad").on("click",function(){$j(this).hasClass("has-lineactive")||$j(this).addClass("has-lineactive").find(".tt-row-block:first-child").addClass("active")}),$j(".table-trad").hasClass("has-lineactive")||$j(".table-trad").addClass("has-lineactive").find(".tt-row-block:first-child").addClass("active"),Mousetrap.bind(["command+up","command+down"],function(e,t){return"command+up"==t&&$j(".tt-row-block.active").prev().length?$j(".tt-row-block.active").removeClass("active").prev().addClass("active"):"command+down"==t&&$j(".tt-row-block.active").next().length&&$j(".tt-row-block.active").removeClass("active").next().addClass("active"),!1}),Mousetrap.bind("command+l",function(){return $j(".tt-row-block.active").length&&$j(".tt-row-block.active").find(".block-tradmore").addClass("is-visible"),!1}),Mousetrap.bind("escape",function(){var e=$j(".tt-row-block.active .block-tradmore");return $j(e).hasClass("is-visible")?($j(e).removeClass("is-visible"),!1):void 0}),Mousetrap.bind(["up","down"],function(e,t){var i=$j(".tt-row-block.active .block-tradmore"),n=$j(i).find(".bt-row.active");return"down"==t?$j(n).next().length&&$j(n).removeClass("active").next().addClass("active"):"up"==t&&($j(n).prev().hasClass("is-head")||$j(n).removeClass("active").prev().addClass("active")),!1}),Mousetrap.bind("enter",function(){var e=$j(".tt-row-block.active .block-tradmore.is-visible .bt-row.active .btr-cell + .btr-cell").text();$j(".tt-row-block.active b").text(e),$j(".block-tradmore.is-visible").removeClass("is-visible")}),Mousetrap.bind(["command+shift+up","command+shift+down"],function(){$j("b:empty").length&&$j("b:empty").eq(0).parent().parent().parent().addClass("active")}),$j(document).on("click",".submit-icon",function(){var e=$j(this).data("uid");$j('input[data-uid="'+e+'"]').click()}),$j(".progres-h2-color").css("color",$j(".progresivline-dash div:first-child").css("background-color")),$j(".settings").on("click",function(){$j(this).toggleClass("open"),$j(".settings-block").toggleClass("open")})});