var $j=jQuery.noConflict(),bacPos=0,projects,initialPosProjects,sidebar,heightLi,headerHeight,projectsHeight,fixedLinks,projectsSidebarHeight,nbLiVisible,roundProjectsSidebarHeight,actualTop,newTop;$j(function(){function t(){$j(".sidebar").is(":visible")?$j(".hs-inner").css("max-width",$j("#header").width()-399+"px"):$j(".hs-inner").css("max-width",$j("#header").width()+"px");var t=$j(".translate-translation"),e=t.width()-(t.find(".erase-btn").outerWidth(!0)-1+t.find(".is-status").outerWidth(!0))-50,i=e;t.find(".error-alert").length&&(i=e-100),$j(".spellchecker").css("max-width",i),$j(".btr-cell").css("max-width",e),$j.each($j(".is-search .tl-item"),function(t,i){var o=$j(i);o.find(".translate-overflow").css("max-width",e)});var o=$j(".is-search");o.css("top",-o.height()-1);var s=$j(".block-tradmore");s.css("bottom",-s.height()-2)}function e(t){actualTop=parseInt(projects.css("top"),10),newTop=t?actualTop-roundProjectsSidebarHeight:actualTop+roundProjectsSidebarHeight,projects.stop().animate({top:newTop},{queue:!1}),t&&actualTop==initialPosProjects&&$j("#prevProjects").fadeIn(),t||newTop!=initialPosProjects||$j("#prevProjects").fadeOut(),t&&newTop+projectsHeight<$j("#nextProjects").offset().top-headerHeight?$j("#nextProjects").fadeOut():$j("#nextProjects").fadeIn()}function i(){projectsSidebarHeight=sidebar.innerHeight()-initialPosProjects-fixedLinks,nbLiVisible=Math.floor(projectsSidebarHeight/heightLi),roundProjectsSidebarHeight=nbLiVisible*heightLi,projectsHeight>roundProjectsSidebarHeight+heightLi?$j("#nextProjects").fadeIn():$j("#nextProjects").fadeOut()}function o(t,e){bacPos++,e?t.css("background-position","0px "+-bacPos+"px"):t.css("background-position",bacPos+"px"),setTimeout(function(){o(t,e)},10)}function s(){var t=$j("#footer"),e=$j("#header"),i=$j("#main-container").outerHeight(!0)+t.outerHeight(!0)+e.outerHeight(!0)+30,o=$j(window).height();t.hasClass("bottom")&&i>=o&&t.removeClass("bottom"),o>i&&t.addClass("bottom")}$j("#open-usermenu").on("click",function(){$j("body").toggleClass("usermenu-open")}),$j("#open-config").on("click",function(){$j(".config-dropdown").slideToggle("fast"),$j(this).parent(".menu-config").toggleClass("open")}),$j("#open-menu").on("click",function(t){t.stopPropagation(),$j("body").toggleClass("sidebar-open").toggleClass("sidebar-disable"),setTimeout(function(){$j(window).trigger("resize")},300)}),window.tuneSizes=t,$j(window).load(function(){t(),$j("body").hasClass("sidebar-open")&&$j(".projets").length&&(projects=$j(".projets"),initialPosProjects=parseInt(projects.css("top"),10),sidebar=$j(".sidebar"),heightLi=projects.find("li").outerHeight(),headerHeight=$j("header").innerHeight(),projectsHeight=projects.innerHeight(),fixedLinks=2*heightLi+sidebar.find("li.s-menu").innerHeight(),i(),$j("#nextProjects").on("click",function(){return e(!0),!1}),$j("#prevProjects").on("click",function(){return e(!1),!1}))}),window.tunePositions=function(){var t=$j(".is-workspace");if(t.length){var e=t.position();$j(".results-popup").css({right:e.left+25+19,top:e.top+104+t.outerHeight(!1)+19})}},window.tunePositions(),$("#calendar").length&&$("#calendar").fullCalendar({header:{left:"title",right:"prev,next"},buttonIcons:!1,buttonText:{prev:"← Previous",next:"Next →"},titleFormat:"MMMM",height:700,allDaySlot:!1,columnFormat:{month:"dddd"},firstDay:1,editable:!0,events:[{title:"Project 1",start:"2015-03-05",end:"2015-03-14",backgroundColor:"#d0e7cc"},{title:"Project 2",start:"2015-03-15",end:"2015-03-21",backgroundColor:"#d7ebef"},{title:"Project 3",start:"2015-03-09",end:"2015-03-24",backgroundColor:"#FFD897"},{title:"Paiment received",start:"2015-03-09"}],dayRender:function(t,e){if(!e.hasClass("fc-past")){var i=e.parents(".fc-bg").siblings(".fc-content-skeleton").find("thead tr").find("td").eq(e.index()),o=e.hasClass("fc-sat")||e.hasClass("fc-sun")?0:8;i.append('<div class="availabilityBtn"><button>-</button><span>'+o+'h</span><button class="plus">+</button></div>')}}}),$("#calendar-erp").length&&$("#calendar-erp").fullCalendar({header:{left:"",right:"prev,next",center:"title"},buttonIcons:!1,buttonText:{prev:"← Previous",next:"Next →"},titleFormat:"MMMM",height:700,allDaySlot:!1,columnFormat:{month:"dddd"},firstDay:1,editable:!0,events:[{title:"PROJECT COBRA (PREVIEW)",start:"2015-04-08",end:"2015-04-14",backgroundColor:"#9cced8",textColor:"#ffffff"},{title:"Projet 3",start:"2015-04-09",end:"2015-04-21",backgroundColor:"#e7e7e7",textColor:"#4a4a4a"}]}),$(".popup").length&&$(".popup").magnificPopup({type:"inline",midClick:!0}),$j("#loader").length&&o($j("#loader"),!1),$j("#smallLoader").length&&o($j("#smallLoader"),!0),$j("#view-read").on("click",function(){return $j(this).addClass("actif").siblings().removeClass("actif"),$j(".table-trad").addClass("reviewer"),t(),!1}),$j("#view-edit").on("click",function(){return $j(this).addClass("actif").siblings().removeClass("actif"),$j(".table-trad").removeClass("reviewer"),t(),!1}),$j("#open-stats").on("click",function(){$j(".table-trad").slideToggle(),$j("#stats").slideToggle(),$j(this).toggleClass("actif"),$j("#tptranslate").toggleClass("white")}),s(),$j(window).resize(function(){s(),t(),window.tunePositions(),$j("body").hasClass("sidebar-open")&&$j(".projets").length&&i()}),$j(".orderby-notifs").on("click",function(){$j(this).find("ul").toggleClass("open")}).find("li").on("click",function(){var t=$j(this).html(),e=$j(".active-orderby").html();$j(".active-orderby").html(t),$j(this).html(e)}),$("#autogrow").length&&$("#autogrow").autoGrowTextArea(),$j("#closeCtrlF").on("click",function(){return console.log("yolo"),$j(this).parent(".hs-inner").slideUp(),!1}),$j(".sidebar.is-submenu").find(".s-item").on("click",function(){return $j(this).toggleClass("is-open").parent().siblings().find(".s-item").removeClass("is-open"),!1}),$j(".table-trad").on("click",function(){$j(this).hasClass("has-lineactive")||$j(this).addClass("has-lineactive").find(".tt-row-block:first-child").addClass("active")}),$j(".table-trad").hasClass("has-lineactive")||$j(".table-trad").addClass("has-lineactive").find(".tt-row-block:first-child").addClass("active"),Mousetrap.bind(["command+up","command+down"],function(t,e){return"command+up"==e&&$j(".tt-row-block.active").prev().length?$j(".tt-row-block.active").removeClass("active").prev().addClass("active"):"command+down"==e&&$j(".tt-row-block.active").next().length&&$j(".tt-row-block.active").removeClass("active").next().addClass("active"),!1}),Mousetrap.bind("command+l",function(){return $j(".tt-row-block.active").length&&$j(".tt-row-block.active").find(".block-tradmore").addClass("is-visible"),!1}),Mousetrap.bind("escape",function(){var t=$j(".tt-row-block.active .block-tradmore");return $j(t).hasClass("is-visible")?($j(t).removeClass("is-visible"),!1):void 0}),Mousetrap.bind(["up","down"],function(t,e){var i=$j(".tt-row-block.active .block-tradmore"),o=$j(i).find(".bt-row.active");return"down"==e?$j(o).next().length&&$j(o).removeClass("active").next().addClass("active"):"up"==e&&($j(o).prev().hasClass("is-head")||$j(o).removeClass("active").prev().addClass("active")),!1}),Mousetrap.bind("enter",function(){var t=$j(".tt-row-block.active .block-tradmore.is-visible .bt-row.active .btr-cell + .btr-cell").text();$j(".tt-row-block.active b").text(t),$j(".block-tradmore.is-visible").removeClass("is-visible")}),Mousetrap.bind(["command+shift+up","command+shift+down"],function(){$j("b:empty").length&&$j("b:empty").eq(0).parent().parent().parent().addClass("active")}),$j(document).on("click",".submit-icon",function(){var t=$j(this).data("uid");$j('input[data-uid="'+t+'"]').click()}),$j(".progres-h2-color").css("color",$j(".progresivline-dash div:first-child").css("background-color"))});